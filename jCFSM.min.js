"use strict";var jCFSM;!function(t){class i{constructor(t){this.t={},this.i={},this.StateAdd(t),this.h=t}StateAdd(t){let i=!1;return void 0===this.t[t]&&(this.t[t]={OnEnter:[],OnLeave:[]},this.i[t]={},i=!0),i}StateDel(t){let i=!1;if(void 0!==this.t[t]){delete this.t[t],void 0!==this.i[t]&&delete this.i[t];for(const i in this.i)void 0!==this.i[i][t]&&delete this.i[i][t];i=!0}return i}StateOnEnterAdd(t,i){let s=!1;return void 0!==this.t[t]&&(this.t[t].OnEnter.includes(i)||(this.t[t].OnEnter.push(i),s=!0)),s}StateOnEnterDel(t,i){let s=!1;if(void 0!==this.t[t]){const h=this.t[t].OnEnter.indexOf(i);-1!==h&&(this.t[t].OnEnter.splice(h,1),s=!0)}return s}StateOnLeaveAdd(t,i){let s=!1;return void 0!==this.t[t]&&(this.t[t].OnLeave.includes(i)||(this.t[t].OnLeave.push(i),s=!0)),s}StateOnLeaveDel(t,i){let s=!1;if(void 0!==this.t[t]){const h=this.t[t].OnLeave.indexOf(i);-1!==h&&(this.t[t].OnLeave.splice(h,1),s=!0)}return s}TransitionAdd(t,i){let s=!1;return void 0!==this.t[t]&&void 0!==this.t[i]&&void 0===this.i[t][i]&&(this.i[t][i]={OnBefore:[],OnAfter:[]},s=!0),s}TransitionDel(t,i){let s=!1;return void 0!==this.t[t]&&void 0!==this.t[i]&&void 0!==this.i[t][i]&&(delete this.i[t][i],s=!0),s}TransitionOnBeforeAdd(t,i,s){let h=!1;return void 0!==this.t[t]&&void 0!==this.t[i]&&void 0!==this.i[t][i]&&(this.i[t][i].OnBefore.push(s),h=!0),h}TransitionOnBeforeDel(t,i,s){let h=!1;if(void 0!==this.t[t]&&void 0!==this.t[i]&&void 0!==this.i[t][i]){const e=this.i[t][i].OnBefore.indexOf(s);-1!==e&&(this.i[t][i].OnBefore.splice(e,1),h=!0)}return h}TransitionOnAfterAdd(t,i,s){let h=!1;return void 0!==this.t[t]&&void 0!==this.t[i]&&void 0!==this.i[t][i]&&(this.i[t][i].OnAfter.push(s),h=!0),h}TransitionOnAfterDel(t,i,s){let h=!1;if(void 0!==this.t[t]&&void 0!==this.t[i]&&void 0!==this.i[t][i]){const e=this.i[t][i].OnAfter.indexOf(s);-1!==e&&(this.i[t][i].OnAfter.splice(e,1),h=!0)}return h}StateGet(){return this.h}async StateSet(t){let i=!1;if(void 0!==this.t[t]&&void 0!==this.i[this.h]&&void 0!==this.i[this.h][t]){let s;i=!0,s=this.t[this.h].OnLeave.length;for(let i=0;i<s;i++)"function"==typeof this.t[this.h].OnLeave[i]&&("AsyncFunction"===this.t[this.h].OnLeave[i].constructor.name?await this.t[this.h].OnLeave[i](this.h,t):this.t[this.h].OnLeave[i](this.h,t));s=this.i[this.h][t].OnBefore.length;for(let i=0;i<s;i++)"function"==typeof this.i[this.h][t].OnBefore[i]&&("AsyncFunction"===this.i[this.h][t].OnBefore[i].constructor.name?await this.i[this.h][t].OnBefore[i]():this.i[this.h][t].OnBefore[i]());let h=this.h;this.h=t,s=this.i[h][this.h].OnAfter.length;for(let t=0;t<s;t++)"function"==typeof this.i[h][this.h].OnAfter[t]&&("AsyncFunction"===this.i[h][this.h].OnAfter[t].constructor.name?await this.i[h][this.h].OnAfter[t]():this.i[h][this.h].OnAfter[t]());s=this.t[this.h].OnEnter.length;for(let t=0;t<s;t++)"function"==typeof this.t[this.h].OnEnter[t]&&("AsyncFunction"===this.t[this.h].OnEnter[t].constructor.name?await this.t[this.h].OnEnter[t](this.h,h):this.t[this.h].OnEnter[t](this.h,h))}return i}}t.Create=function(t){return new i(t)}}(jCFSM||(jCFSM={})),"object"==typeof exports&&(exports.Create=jCFSM.Create);